@page
@model CarStore.WebUI.Areas.Admin.Pages.Cars.IndexModel
@{
    ViewData["Title"] = "Quản Lý Xe";
}

<!-- Page Header -->
<div class="mb-8">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between">
        <div>
            <h1 class="text-3xl font-bold text-gray-800 mb-2">
                <i class="fas fa-car text-blue-600 mr-2"></i>@ViewData["Title"]
            </h1>
            <p class="text-gray-600">Quản lý tất cả các xe trong hệ thống</p>
        </div>
        <div class="mt-4 md:mt-0">
            <a asp-page="Create" class="inline-flex items-center bg-gradient-to-r from-blue-600 to-indigo-600 hover:from-blue-700 hover:to-indigo-700 text-white font-bold py-3 px-6 rounded-xl transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105">
                <i class="fas fa-plus mr-2"></i> Thêm Xe Mới
            </a>
        </div>
    </div>
</div>

<!-- Statistics Cards -->
<div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
    <div class="bg-gradient-to-br from-blue-500 to-blue-600 rounded-xl p-6 text-white shadow-lg">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-blue-100 text-sm mb-1">Tổng số xe</p>
                <p class="text-3xl font-bold">@Model.Cars.Count()</p>
            </div>
            <div class="bg-white bg-opacity-20 rounded-full p-4">
                <i class="fas fa-car fa-2x"></i>
            </div>
        </div>
    </div>
    <div class="bg-gradient-to-br from-green-500 to-green-600 rounded-xl p-6 text-white shadow-lg">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-green-100 text-sm mb-1">Còn hàng</p>
                <p class="text-3xl font-bold">@Model.Cars.Count(c => c.Stock > 0)</p>
            </div>
            <div class="bg-white bg-opacity-20 rounded-full p-4">
                <i class="fas fa-check-circle fa-2x"></i>
            </div>
        </div>
    </div>
    <div class="bg-gradient-to-br from-orange-500 to-orange-600 rounded-xl p-6 text-white shadow-lg">
        <div class="flex items-center justify-between">
            <div>
                <p class="text-orange-100 text-sm mb-1">Hết hàng</p>
                <p class="text-3xl font-bold">@Model.Cars.Count(c => c.Stock == 0)</p>
            </div>
            <div class="bg-white bg-opacity-20 rounded-full p-4">
                <i class="fas fa-exclamation-triangle fa-2x"></i>
            </div>
        </div>
    </div>
</div>

<!-- Cars Table -->
<div class="bg-white shadow-xl rounded-xl overflow-hidden">
    <div class="overflow-x-auto">
        <table class="min-w-full leading-normal">
            <thead>
                <tr class="bg-gradient-to-r from-gray-50 to-gray-100">
                    <th class="px-6 py-4 border-b-2 border-gray-200 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                        Thông Tin Xe
                    </th>
                    <th class="px-6 py-4 border-b-2 border-gray-200 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                        Giá Bán
                    </th>
                    <th class="px-6 py-4 border-b-2 border-gray-200 text-left text-xs font-bold text-gray-700 uppercase tracking-wider">
                        Tồn Kho
                    </th>
                    <th class="px-6 py-4 border-b-2 border-gray-200 text-right text-xs font-bold text-gray-700 uppercase tracking-wider">
                        Thao Tác
                    </th>
                </tr>
            </thead>
            <tbody>
                @foreach (var car in Model.Cars)
                {
                    <tr class="hover:bg-gray-50 transition-colors">
                        <td class="px-6 py-5 border-b border-gray-200 bg-white text-sm">
                            <div class="flex items-center">
                                <div class="flex-shrink-0 w-20 h-20 relative">
                                    <img class="w-full h-full rounded-lg object-cover shadow-md" src="@(car.ImageUrl ?? "https://via.placeholder.com/100")" alt="@car.Model" />
                                </div>
                                <div class="ml-4">
                                    <p class="text-gray-900 font-bold text-base whitespace-no-wrap">
                                        @car.Brand @car.Model
                                    </p>
                                    <p class="text-gray-600 text-sm">
                                        <i class="fas fa-calendar-alt mr-1"></i>Năm @car.Year
                                    </p>
                                </div>
                            </div>
                        </td>
                        <td class="px-6 py-5 border-b border-gray-200 bg-white text-sm">
                            <p class="text-blue-600 font-bold text-lg whitespace-no-wrap">@car.Price.ToString("C0")</p>
                        </td>
                        <td class="px-6 py-5 border-b border-gray-200 bg-white text-sm">
                            @if (car.Stock > 0)
                            {
                                <span class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800">
                                    <i class="fas fa-box mr-1 mt-0.5"></i>@car.Stock xe
                                </span>
                            }
                            else
                            {
                                <span class="px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-red-100 text-red-800">
                                    <i class="fas fa-times-circle mr-1 mt-0.5"></i>Hết hàng
                                </span>
                            }
                        </td>
                        <td class="px-6 py-5 border-b border-gray-200 bg-white text-sm text-right">
                            <div class="flex items-center justify-end space-x-3">
                                <a asp-page="./Edit" asp-route-id="@car.CarId" class="text-blue-600 hover:text-blue-900 font-semibold hover:underline transition-colors">
                                    <i class="fas fa-edit mr-1"></i>Sửa
                                </a>
                                <a asp-page="./Delete" asp-route-id="@car.CarId" class="text-red-600 hover:text-red-900 font-semibold hover:underline transition-colors">
                                    <i class="fas fa-trash mr-1"></i>Xóa
                                </a>
                            </div>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@if (!Model.Cars.Any())
{
    <div class="text-center py-16">
        <i class="fas fa-car-side fa-4x text-gray-300 mb-4"></i>
        <h3 class="text-xl font-semibold text-gray-700 mb-2">Chưa có xe nào</h3>
        <p class="text-gray-500 mb-4">Bắt đầu bằng cách thêm xe mới vào hệ thống</p>
        <a asp-page="Create" class="inline-flex items-center bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-lg transition duration-300">
            <i class="fas fa-plus mr-2"></i> Thêm Xe Đầu Tiên
        </a>
    </div>
}
